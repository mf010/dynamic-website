import{r as a,j as e,L as u,h}from"./index-DridtdXo.js";import{F as m}from"./PlusIcon-C57RYCdF.js";import{F as N}from"./MagnifyingGlassIcon-CSG60ogQ.js";import{F as b}from"./EyeIcon-BxpOoJ1J.js";import{F as k}from"./TrashIcon-CgZ3rScW.js";function v({title:l,titleId:s,...i},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},i),l?a.createElement("title",{id:s},l):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const _=a.forwardRef(v),D=()=>{const[l,s]=a.useState([]),[i,d]=a.useState(!0),[r,g]=a.useState(null),[n,c]=a.useState(1),[o,w]=a.useState(""),[f,p]=a.useState(null),j=async()=>{d(!0);try{const t=await h.getAll({page:n,search:o,per_page:10});t.data?.data?(s(Array.isArray(t.data.data)?t.data.data:[]),t.data?.meta&&g(t.data.meta)):Array.isArray(t.data)?s(t.data):s([])}catch(t){console.error("Error fetching news:",t),s([])}finally{d(!1)}};a.useEffect(()=>{j()},[n,o]);const y=async t=>{if(window.confirm("Are you sure you want to delete this article?")){p(t);try{await h.delete(t),s(l.filter(x=>x.id!==t))}catch(x){console.error("Error deleting news:",x),alert("Failed to delete the article")}finally{p(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"News Management"}),e.jsx("p",{className:"text-neutral-500",children:"Manage your news articles"})]}),e.jsxs(u,{to:"/admin/news/create",className:"btn-primary",children:[e.jsx(m,{className:"w-5 h-5 me-2"}),"Add News"]})]}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search news...",value:o,onChange:t=>{w(t.target.value),c(1)},className:"input ps-12"})]})}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft overflow-hidden",children:[i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):l.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:l.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-900 dark:text-white line-clamp-1",children:t.title}),e.jsxs("p",{className:"text-sm text-neutral-500",children:["/news/",t.slug]})]})}),e.jsx("td",{className:"px-6 py-4",children:t.category?e.jsx("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400 text-xs rounded",children:t.category}):e.jsx("span",{className:"text-neutral-400",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${t.is_published?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"}`,children:t.is_published?"Published":"Draft"}),t.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs rounded",children:"Featured"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-neutral-500",children:new Date(t.published_at||t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("a",{href:`/news/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-neutral-500 hover:text-primary-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg transition-colors",title:"View",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx(u,{to:`/admin/news/${t.id}/edit`,className:"p-2 text-neutral-500 hover:text-primary-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg transition-colors",title:"Edit",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(t.id),disabled:f===t.id,className:"p-2 text-neutral-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(k,{className:"w-5 h-5"})})]})})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-neutral-500",children:"No news articles found"}),e.jsxs(u,{to:"/admin/news/create",className:"btn-primary mt-4",children:[e.jsx(m,{className:"w-5 h-5 me-2"}),"Add Your First Article"]})]}),r&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",(r.current_page-1)*r.per_page+1," to"," ",Math.min(r.current_page*r.per_page,r.total)," of ",r.total," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(n-1),disabled:n===1,className:"btn-outline px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>c(n+1),disabled:n===r.last_page,className:"btn-outline px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})};export{D as default};
