import{r as s,a as Y,u as q,j as e,H as J,m,L as K,n as F,A as Q,F as V}from"./index-D7Gsiyf2.js";import{F as X}from"./MagnifyingGlassIcon-CwGt3168.js";import{F as I}from"./EyeIcon-BkBb9QlU.js";import{F as A}from"./CalendarIcon-JOrNHBN0.js";function Z({title:r,titleId:a,...i},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const ee=s.forwardRef(Z);function te({title:r,titleId:a,...i},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const ae=s.forwardRef(te),P=r=>r?r.startsWith("http")||r.startsWith("data:")?r:`${"https://rekazcode.ly/backend/api".replace("/api","")||"http://localhost:8000"}/storage/${r}`:null,se=({images:r,currentIndex:a,onClose:i,onNext:o,onPrev:g})=>e.jsx(Q,{children:e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",onClick:i,children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 text-white/80 hover:text-white transition-colors z-10",children:e.jsx(V,{className:"w-8 h-8"})}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),g()},className:"absolute left-4 p-2 text-white/80 hover:text-white transition-colors",children:e.jsx(ee,{className:"w-10 h-10"})}),e.jsx("button",{onClick:x=>{x.stopPropagation(),o()},className:"absolute right-4 p-2 text-white/80 hover:text-white transition-colors",children:e.jsx(ae,{className:"w-10 h-10"})})]}),e.jsx(m.img,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},src:r[a],alt:"",className:"max-h-[90vh] max-w-[90vw] object-contain",onClick:x=>x.stopPropagation()},a),r.length>1&&e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/80 text-sm",children:[a+1," / ",r.length]})]})}),ie=()=>{const{settings:r}=Y(),{language:a}=q(),[i,o]=s.useState([]),[g,x]=s.useState(!0),[y,u]=s.useState(null),[h,p]=s.useState(1),[w,b]=s.useState(1),[j,R]=s.useState(""),[v,$]=s.useState(""),[k,U]=s.useState([]),[z,C]=s.useState(!1),[f,D]=s.useState([]),[O,N]=s.useState(0),S=(t,n)=>{D(t),N(n),C(!0)},W=()=>C(!1),H=()=>N(t=>(t+1)%f.length),T=()=>N(t=>(t-1+f.length)%f.length);s.useEffect(()=>{(async()=>{try{const n=await F.getCategories();n.data?.data&&U(n.data.data)}catch{console.log("Categories not available")}})()},[]),s.useEffect(()=>{(async()=>{x(!0),u(null);const n=localStorage.getItem("admin_token");console.log("Fetching news, token exists:",!!n);try{const l=await F.getAll({page:h,per_page:9,search:j||void 0,category:v||void 0});console.log("News API response:",l.data),l.data?.data?(o(Array.isArray(l.data.data)?l.data.data:[l.data.data]),l.data?.meta?b(l.data.meta.last_page||1):b(1)):Array.isArray(l.data)?(o(l.data),b(1)):(o([]),b(1))}catch(l){console.error("Error fetching news:",l),l.response?.status===401?u(a==="ar"?"يرجى تسجيل الدخول لعرض الأخبار":"Please login to view news"):l.response?.status===500?u(a==="ar"?"الأخبار غير متاحة حالياً":"News is currently unavailable"):u(a==="ar"?"حدث خطأ أثناء تحميل الأخبار":"Error loading news"),o([])}finally{x(!1)}})()},[h,j,v,a]);const _={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},M=a==="ar"?r.site_name_ar||"الموقع":r.site_name||"Site",G=`${a==="ar"?"الأخبار":"News"} - ${M}`;return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:G})}),e.jsx("section",{className:"relative py-32 bg-gradient-primary overflow-hidden",children:e.jsx("div",{className:"container-custom relative z-10",children:e.jsxs(m.div,{className:"max-w-3xl mx-auto text-center",initial:"hidden",animate:"visible",variants:_,children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6",children:a==="ar"?"الأخبار":"News"}),e.jsx("p",{className:"text-xl text-white/80",children:a==="ar"?"تابع آخر أخبارنا وتحديثاتنا":"Stay updated with our latest news and updates"})]})})}),e.jsx("section",{className:"py-8 bg-neutral-50 dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(X,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:a==="ar"?"بحث...":"Search...",value:j,onChange:t=>{R(t.target.value),p(1)},className:"input ps-12"})]}),k.length>0&&e.jsxs("select",{value:v,onChange:t=>{$(t.target.value),p(1)},className:"input max-w-xs",children:[e.jsx("option",{value:"",children:a==="ar"?"جميع التصنيفات":"All Categories"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]})})}),e.jsx("section",{className:"section",children:e.jsxs("div",{className:"container-custom",children:[y&&!g&&e.jsxs("div",{className:"mb-8 p-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg text-center",children:[e.jsx("p",{className:"text-amber-700 dark:text-amber-400 text-lg mb-4",children:y}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:a==="ar"?"يمكنك تسجيل الدخول كمسؤول لإدارة الأخبار":"You can login as admin to manage news"}),e.jsx(K,{to:"/admin/login",className:"inline-block px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:a==="ar"?"تسجيل الدخول":"Admin Login"})]}),g?e.jsx("div",{className:"flex flex-col gap-8 max-w-4xl mx-auto",children:[1,2,3].map(t=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsx("div",{className:"h-64 bg-neutral-200 dark:bg-neutral-700"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded w-24 mb-3"}),e.jsx("div",{className:"h-6 bg-neutral-200 dark:bg-neutral-700 rounded mb-3"}),e.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded w-3/4"})]})]},t))}):i.length>0?e.jsxs(e.Fragment,{children:[z&&e.jsx(se,{images:f,currentIndex:O,onClose:W,onNext:H,onPrev:T}),e.jsx(m.div,{className:"flex flex-col gap-12 max-w-4xl mx-auto",variants:B,initial:"hidden",animate:"visible",children:i.map(t=>{const n=[];if(t.featured_image){const c=P(t.featured_image);c&&n.push(c)}t.images&&Array.isArray(t.images)&&t.images.forEach(c=>{const d=P(c.image||c);d&&n.push(d)});const l=n.length>0,L=n[0],E=n.slice(1);return e.jsx(m.div,{variants:_,children:e.jsxs("article",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-xl overflow-hidden",children:[L&&e.jsxs("div",{className:"relative h-80 md:h-[28rem] overflow-hidden cursor-pointer group",onClick:()=>S(n,0),children:[e.jsx("img",{src:L,alt:(a==="ar"?t.title_ar:t.title)||"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:c=>{const d=c.target.parentElement;d&&(d.style.display="none")}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),t.category&&e.jsx("span",{className:"absolute top-4 left-4 px-4 py-1.5 bg-primary-600 text-white text-sm font-medium rounded-full",children:t.category}),n.length>1&&e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1.5 bg-black/50 text-white text-sm rounded-full flex items-center gap-1.5",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.length," ",a==="ar"?"صور":"photos"]})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 text-white/80 text-sm mb-3",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:t.published_at_formatted||(t.published_at?new Date(t.published_at).toLocaleDateString():"")}),t.views!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.views," ",a==="ar"?"مشاهدة":"views"]})]})]}),e.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-white leading-tight",children:a==="ar"&&t.title_ar||t.title})]})]}),E.length>0&&e.jsx("div",{className:"px-6 md:px-8 py-4 bg-neutral-50 dark:bg-neutral-900/50 border-b border-neutral-200 dark:border-neutral-700",children:e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin",children:E.map((c,d)=>e.jsx("button",{onClick:()=>S(n,d+1),className:"flex-shrink-0 w-20 h-20 md:w-24 md:h-24 rounded-lg overflow-hidden hover:opacity-80 transition-opacity ring-2 ring-transparent hover:ring-primary-500",children:e.jsx("img",{src:c,alt:`Gallery ${d+1}`,className:"w-full h-full object-cover"})},d))})}),e.jsxs("div",{className:"p-6 md:p-8",children:[!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 text-neutral-500 text-sm mb-3",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:t.published_at_formatted||(t.published_at?new Date(t.published_at).toLocaleDateString():"")})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-neutral-900 dark:text-white mb-4",children:a==="ar"&&t.title_ar||t.title})]}),e.jsx("div",{className:`text-neutral-700 dark:text-neutral-300 prose prose-lg prose-neutral dark:prose-invert max-w-none
                              prose-headings:text-neutral-900 dark:prose-headings:text-white
                              prose-p:leading-relaxed
                              prose-a:text-primary-600 prose-a:no-underline hover:prose-a:underline
                              prose-img:rounded-xl prose-img:shadow-lg`,dangerouslySetInnerHTML:{__html:a==="ar"?t.content_ar||t.content||"":t.content||""}})]})]})},t.id)})}),w>1&&e.jsxs("div",{className:"flex justify-center mt-12 gap-2",children:[e.jsx("button",{onClick:()=>p(h-1),disabled:h===1,className:"btn-outline px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a==="ar"?"السابق":"Previous"}),e.jsxs("span",{className:"flex items-center px-4 text-neutral-600 dark:text-neutral-400",children:[h," / ",w]}),e.jsx("button",{onClick:()=>p(h+1),disabled:h===w,className:"btn-outline px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a==="ar"?"التالي":"Next"})]})]}):e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-neutral-500 text-lg",children:a==="ar"?"لا توجد أخبار متاحة حالياً":"No news available at the moment"})})]})})]})};export{ie as default};
