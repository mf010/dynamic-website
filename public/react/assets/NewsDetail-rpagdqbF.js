import{r,b as L,a as A,u as S,j as e,L as c,H as R,m as h,n as v}from"./index-DridtdXo.js";import{F}from"./ArrowRightIcon-BcHLzT4Z.js";import{F as B}from"./ArrowLeftIcon-6Acp-hy-.js";import{F as H}from"./CalendarIcon-CQuonZDY.js";function $({title:l,titleId:n,...a},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),l?r.createElement("title",{id:n},l):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const M=r.forwardRef($);function T({title:l,titleId:n,...a},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),l?r.createElement("title",{id:n},l):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Z=r.forwardRef(T),P=()=>{const{slug:l}=L(),{settings:n}=A(),{language:a}=S(),[t,b]=r.useState(null),[u,g]=r.useState([]),[y,f]=r.useState(!0),[p,o]=r.useState(null),m=a==="ar"?F:B;r.useEffect(()=>{(async()=>{if(l){f(!0),o(null);try{const i=await v.getBySlug(l),j=i.data?.data||i.data;b(j);try{const w=await v.getAll({per_page:3,category:j?.category||void 0}),N=w.data?.data||w.data||[];Array.isArray(N)&&g(N.filter(E=>E.slug!==l).slice(0,3))}catch{g([])}}catch(i){console.error("Error fetching article:",i),i.response?.status===401?o(a==="ar"?"يرجى تسجيل الدخول لعرض هذا المقال":"Please login to view this article"):i.response?.status===404?o(a==="ar"?"المقال غير موجود":"Article not found"):o(a==="ar"?"حدث خطأ أثناء تحميل المقال":"Error loading article")}finally{f(!1)}}})()},[l,a]);const k=async()=>{if(navigator.share)try{await navigator.share({title:t?a==="ar"&&t.title_ar||t.title:"",url:window.location.href})}catch(s){console.error("Error sharing:",s)}else navigator.clipboard.writeText(window.location.href),alert(a==="ar"?"تم نسخ الرابط":"Link copied to clipboard")},x={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}};if(y)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})});if(p||!t)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-4",children:p||(a==="ar"?"المقال غير موجود":"Article Not Found")}),e.jsx(c,{to:"/news",className:"btn-primary",children:a==="ar"?"العودة للأخبار":"Back to News"})]});const d=a==="ar"&&t.title_ar||t.title,_=a==="ar"&&t.content_ar||t.content;return e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs("title",{children:[d," - ",a==="ar"?n.site_name_ar:n.site_name]}),e.jsx("meta",{name:"description",content:a==="ar"&&t.excerpt_ar||t.excerpt||void 0})]}),e.jsx("section",{className:"relative py-32 bg-gradient-primary overflow-hidden",children:e.jsx("div",{className:"container-custom relative z-10",children:e.jsxs(h.div,{className:"max-w-4xl",initial:"hidden",animate:"visible",variants:x,children:[e.jsx("nav",{className:"mb-6",children:e.jsxs("ol",{className:"flex items-center gap-2 text-white/70",children:[e.jsx("li",{children:e.jsx(c,{to:"/",className:"hover:text-white transition-colors",children:a==="ar"?"الرئيسية":"Home"})}),e.jsx("li",{children:e.jsx(m,{className:"w-4 h-4 rotate-180"})}),e.jsx("li",{children:e.jsx(c,{to:"/news",className:"hover:text-white transition-colors",children:a==="ar"?"الأخبار":"News"})}),e.jsx("li",{children:e.jsx(m,{className:"w-4 h-4 rotate-180"})}),e.jsx("li",{className:"text-white truncate max-w-xs",children:d})]})}),t.category&&e.jsx("span",{className:"badge-accent mb-4",children:t.category}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6",children:d}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-white/80",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),t.published_at_formatted]}),t.category&&e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),t.category]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 hover:text-white transition-colors",children:[e.jsx(M,{className:"w-5 h-5"}),a==="ar"?"مشاركة":"Share"]})]})]})})}),e.jsx("section",{className:"section",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsxs(h.div,{className:"lg:col-span-2",initial:"hidden",animate:"visible",variants:x,children:[t.featured_image&&e.jsx("img",{src:t.featured_image,alt:d,className:"w-full h-auto rounded-xl shadow-lg mb-8"}),e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:_}}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-500 mb-3",children:a==="ar"?"الوسوم":"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((s,i)=>e.jsxs("span",{className:"px-3 py-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 rounded-full text-sm",children:["#",s]},i))})]})]}),e.jsxs("aside",{children:[u.length>0&&e.jsxs(h.div,{initial:"hidden",animate:"visible",variants:x,children:[e.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-6",children:a==="ar"?"أخبار ذات صلة":"Related News"}),e.jsx("div",{className:"space-y-6",children:u.map(s=>e.jsx(c,{to:`/news/${s.slug}`,className:"block group",children:e.jsxs("div",{className:"flex gap-4",children:[s.featured_image&&e.jsx("img",{src:s.featured_image,alt:a==="ar"&&s.title_ar||s.title,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-neutral-900 dark:text-white group-hover:text-primary-600 transition-colors line-clamp-2",children:a==="ar"&&s.title_ar||s.title}),e.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:s.published_at_formatted})]})]})},s.id))})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(c,{to:"/news",className:"btn-outline w-full justify-center",children:[e.jsx(m,{className:"w-5 h-5 me-2"}),a==="ar"?"العودة للأخبار":"Back to News"]})})]})]})})})]})};export{P as default};
