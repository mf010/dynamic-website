import{r as s,j as e,L as u,h as m}from"./index-CSz0JR-q.js";import{F as h}from"./PlusIcon-CD_z088j.js";import{F as N}from"./MagnifyingGlassIcon-HsuQCTWb.js";import{F as b}from"./EyeIcon-CBYdEBvg.js";import{F as v}from"./TrashIcon-Bz8aWlr6.js";function k({title:n,titleId:l,...o},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},o),n?s.createElement("title",{id:l},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const _=s.forwardRef(k),E=()=>{const[n,l]=s.useState([]),[o,i]=s.useState(!0),[r,g]=s.useState(null),[d,c]=s.useState(1),[x,w]=s.useState(""),[f,p]=s.useState(null),j=async()=>{i(!0);try{const t=await m.getAll({page:d,search:x,per_page:10});console.log("Admin News API full response:",t),console.log("Admin News API data body:",t.data);const a=t.data?.data;console.log("Admin News API extracted apiData:",a),a?.data?(console.log("Found paginated data, items count:",a.data.length),l(Array.isArray(a.data)?a.data:[]),g({current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total})):Array.isArray(a)?(console.log("Found array data, items count:",a.length),l(a)):(console.warn("Could not find news data in response. Structure seems validation failed or empty."),l([]))}catch(t){console.error("Error fetching news:",t),l([])}finally{i(!1)}};s.useEffect(()=>{j()},[d,x]);const y=async t=>{if(window.confirm("Are you sure you want to delete this article?")){p(t);try{await m.delete(t),l(n.filter(a=>a.id!==t))}catch(a){console.error("Error deleting news:",a),alert("Failed to delete the article")}finally{p(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"News Management"}),e.jsx("p",{className:"text-neutral-500",children:"Manage your news articles"})]}),e.jsxs(u,{to:"/admin/news/create",className:"btn-primary",children:[e.jsx(h,{className:"w-5 h-5 me-2"}),"Add News"]})]}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search news...",value:x,onChange:t=>{w(t.target.value),c(1)},className:"input ps-12"})]})}),e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft overflow-hidden",children:[o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):n.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:n.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-900 dark:text-white line-clamp-1",children:t.title}),e.jsxs("p",{className:"text-sm text-neutral-500",children:["/news/",t.slug]})]})}),e.jsx("td",{className:"px-6 py-4",children:t.category?e.jsx("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400 text-xs rounded",children:t.category}):e.jsx("span",{className:"text-neutral-400",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${t.is_published?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400"}`,children:t.is_published?"Published":"Draft"}),t.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 text-xs rounded",children:"Featured"})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-neutral-500",children:new Date(t.published_at||t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("a",{href:`/news/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-neutral-500 hover:text-primary-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg transition-colors",title:"View",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx(u,{to:`/admin/news/${t.id}/edit`,className:"p-2 text-neutral-500 hover:text-primary-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg transition-colors",title:"Edit",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(t.id),disabled:f===t.id,className:"p-2 text-neutral-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(v,{className:"w-5 h-5"})})]})})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-neutral-500",children:"No news articles found"}),e.jsxs(u,{to:"/admin/news/create",className:"btn-primary mt-4",children:[e.jsx(h,{className:"w-5 h-5 me-2"}),"Add Your First Article"]})]}),r&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",(r.current_page-1)*r.per_page+1," to"," ",Math.min(r.current_page*r.per_page,r.total)," of ",r.total," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(d-1),disabled:d===1,className:"btn-outline px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>c(d+1),disabled:d===r.last_page,className:"btn-outline px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})};export{E as default};
