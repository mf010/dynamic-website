import{r,i as o,j as e,L as x}from"./index-CSz0JR-q.js";import{F as w}from"./PlusIcon-CD_z088j.js";import{F as j}from"./MagnifyingGlassIcon-HsuQCTWb.js";import{F as g}from"./UserCircleIcon-BKqUbuZQ.js";import{F as y}from"./PencilSquareIcon-BqE91BAj.js";import{F as N}from"./TrashIcon-Bz8aWlr6.js";const A=()=>{const[n,l]=r.useState([]),[m,i]=r.useState(!0),[s,p]=r.useState(""),[u,d]=r.useState(null);r.useEffect(()=>{h()},[]);const h=async()=>{i(!0);try{const t=await o.getAll(),a=t.data?.data||t.data||[];l(Array.isArray(a)?a:[])}catch(t){console.error("Error fetching users:",t),l([])}finally{i(!1)}},f=async t=>{if(window.confirm("Are you sure you want to delete this user?")){d(t);try{await o.delete(t),l(n.filter(a=>a.id!==t))}catch(a){console.error("Error deleting user:",a),alert("Failed to delete user")}finally{d(null)}}},c=n.filter(t=>t.name.toLowerCase().includes(s.toLowerCase())||t.email.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Users"}),e.jsx("p",{className:"text-neutral-500",children:"Manage user accounts"})]}),e.jsxs(x,{to:"/admin/users/create",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Add User"]})]}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:t=>p(t.target.value),className:"input pl-10"})]})}),e.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-soft overflow-hidden",children:m?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"})}):c.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-10 h-10 text-neutral-400"}),e.jsx("span",{className:"font-medium text-neutral-900 dark:text-white",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-neutral-600 dark:text-neutral-400",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 rounded-full",children:t.role||"User"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(x,{to:`/admin/users/${t.id}/edit`,className:"p-2 text-neutral-500 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>f(t.id),disabled:u===t.id,className:"p-2 text-neutral-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(N,{className:"w-5 h-5"})})]})})]},t.id))})]})}):e.jsx("div",{className:"p-8 text-center text-neutral-500",children:s?"No users found matching your search":"No users yet"})})]})};export{A as default};
